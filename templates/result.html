<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Résultats - Générateur IA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/static/style.css">
  <style>
    body { background: #f5f8ff; font-family: 'Segoe UI', Arial, sans-serif; }
    .container { max-width: 700px; margin: 38px auto 36px auto; background: #fff; border-radius: 2.2em; padding: 2.2em 2.3em; box-shadow: 0 0 18px #0001; }
    h2 { margin-top: 0; }
    .dl-section { display: flex; flex-wrap: wrap; gap: 1em; margin-bottom: 1.6em; }
    .dl-block { flex: 1; min-width: 190px; background: #f3f7ff; border-radius: 1em; padding: 1em 1.4em; text-align: center; }
    .dl-block h4 { margin-bottom: .7em; }
    .dl-block a { display: inline-block; margin-top: .2em; background: #488be1; color: #fff; text-decoration: none; padding: .45em 1.2em; border-radius: .8em; font-weight: bold; }
    .block { margin-bottom: 2em; }
    .resume, .fiche, .lettre { background: #f8f8ff; border-radius: 1.1em; padding: 1.3em 1.6em 1.2em 1.6em; }
    .fiche { background: #fffdf7; border: 1px solid #ffecc7; }
    @media (max-width: 750px) {
      .container { padding: 1em .3em; border-radius: 0; }
      .dl-block { min-width: unset; font-size: 0.97em; padding: 0.5em 0.5em; }
      .resume, .fiche, .lettre { padding: .8em .5em; }
    }
    .back-btn { margin-top: 1.2em; display: inline-block; color: #2667a6; font-weight: 600; text-decoration: none;}
  </style>
</head>
<body>
  <div class="container">
    <h2>Résultats générés</h2>
    <div class="dl-section">
      <div class="dl-block">
        <h4>CV</h4>
        <a href="/download/{{ cv_file }}" download>PDF</a> | <a href="/download/{{ cv_file_docx }}" download>Word</a>
      </div>
      <div class="dl-block">
        <h4>Lettre de motivation</h4>
        <a href="/download/{{ lm_file }}" download>PDF</a> | <a href="/download/{{ lm_file_docx }}" download>Word</a>
      </div>
      <div class="dl-block">
        <h4>Fiche de poste</h4>
        <a href="/download/{{ fiche_file }}" download>PDF</a> | <a href="/download/{{ fiche_file_docx }}" download>Word</a>
      </div>
    </div>
    <div class="block resume">
      <h3>Résumé du CV généré</h3>
      <p><strong>{{ nom }} {{ prenom }}</strong> — {{ adresse }}<br>
      {{ telephone }} | {{ email }} | {{ age }} ans</p>
      {% if cv.profil %}<p><em>{{ cv.profil }}</em></p>{% endif %}
      {% if cv.competences %}<p><b>Compétences :</b> {{ cv.competences | join(", ") }}</p>{% endif %}
      {% if cv.experiences %}
        <p><b>Expériences :</b>
        <ul>{% for e in cv.experiences %}<li>{{ e }}</li>{% endfor %}</ul></p>
      {% endif %}
      {% if cv.formations %}
        <p><b>Formations :</b>
        <ul>{% for f in cv.formations %}<li>{{ f }}</li>{% endfor %}</ul></p>
      {% endif %}
    </div>
    <div class="block lettre">
      <h3>Lettre de motivation générée</h3>
      <div style="white-space: pre-line;">{{ lettre_motivation }}</div>
    </div>
    <div class="block fiche">
      <h3>Fiche de poste générée</h3>
      <ul>
        {% for k, v in fiche.items() %}
          {% if v is string and v.strip() %}
            <li><b>{{ k | capitalize }} :</b> {{ v }}</li>
          {% elif v is iterable and v and not v is string %}
            <li><b>{{ k | capitalize }} :</b>
              <ul>
                {% for item in v %}
                  <li>{{ item }}</li>
                {% endfor %}
              </ul>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    </div>
    <a class="back-btn" href="/">← Revenir à l’accueil</a>
  </div>
</body>
</html>
