<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>R√©sultats ‚Äî CV/LM/Fiche g√©n√©r√©s</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <style>
        body { background: #f6f7fb; font-family: 'Segoe UI', Arial, sans-serif; color:#1b243e;}
        .container {
            max-width: 800px; margin: 30px auto 20px auto; background:#fff;
            border-radius: 15px; box-shadow: 0 6px 36px #d2e0fc34;
            padding:30px 30px 22px 30px;
        }
        h1 { color: #2946e2; text-align:center; margin-bottom: 11px;}
        .download-grid { display:flex; flex-wrap:wrap; gap:18px; justify-content:center; margin:28px 0 18px 0;}
        .down-btn {
            display:block; background:#2847d3; color:#fff; font-weight:600;
            border:none; border-radius:7px; padding:12px 23px; font-size:1.04em; cursor:pointer;
            box-shadow: 0 2px 12px #cad7fc24; text-decoration:none; transition:background .18s;
            margin-bottom:7px;
        }
        .down-btn:hover { background:#4673f1;}
        .section { margin-bottom: 25px;}
        .previews { display:flex; flex-wrap:wrap; gap:25px;}
        .preview-block {
            background:#f6f8fc; border:1.2px solid #dde8fa; border-radius:11px;
            padding:19px 18px 10px 18px; flex:1 1 290px; min-width:260px; max-width:100%;
            box-shadow: 0 2px 8px #dde8ff13; margin-bottom:13px;
            overflow-x:auto;
        }
        .preview-block h2 { color:#1d2d7b; margin-top:0;}
        .badge {display:inline-block;padding:3px 9px;font-size:.93em;background:#dff1fc;color:#158ea1;border-radius:8px;margin-right:6px;}
        .err { color:#c01e2d; background:#fff0f3; padding:8px 15px; border-radius:7px; margin-bottom:18px; text-align:center;}
        .cvzone {
            background:#fffce6;border:1.5px solid #eed444;padding:18px 22px;margin-bottom:24px;border-radius:9px;
            font-size:.97em; color:#6b5612;
        }
        pre { background:#fcfcff; padding:9px; border-radius:6px; font-size:.99em;}
        @media (max-width:800px) { .container { max-width:96vw; padding: 15px 2vw;}}
        @media (max-width:500px) {
            .container { padding:8px 1vw;}
            .download-grid { flex-direction:column; align-items:center;}
            .previews { flex-direction:column;}
            .preview-block { padding:10px 5vw;}
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Documents g√©n√©r√©s</h1>
        {% if error %}
            <div class="err">{{ error }}</div>
        {% endif %}
        <div class="download-grid">
            <a href="{{ url_for('download_file', filename=fiche_file) }}" class="down-btn" download>‚¨áÔ∏è T√©l√©charger la fiche (PDF)</a>
            <a href="{{ url_for('download_file', filename=fiche_file_docx) }}" class="down-btn" download>‚¨áÔ∏è Fiche (Word)</a>
            <a href="{{ url_for('download_file', filename=cv_file) }}" class="down-btn" download>‚¨áÔ∏è CV (PDF)</a>
            <a href="{{ url_for('download_file', filename=cv_file_docx) }}" class="down-btn" download>‚¨áÔ∏è CV (Word)</a>
            <a href="{{ url_for('download_file', filename=lm_file) }}" class="down-btn" download>‚¨áÔ∏è Lettre de motivation (PDF)</a>
            <a href="{{ url_for('download_file', filename=lm_file_docx) }}" class="down-btn" download>‚¨áÔ∏è Lettre de motivation (Word)</a>
        </div>
        {% if cv_uploaded %}
            <div class="cvzone">
                <b>Voici le texte extrait de votre CV (ce que l‚ÄôIA a r√©ellement analys√©) :</b>
                {% if cv_truncated %}
                    <div style="color:#b10a23"><i>‚ö†Ô∏è Seule une partie de votre CV a pu √™tre analys√©e car le fichier √©tait trop volumineux.</i></div>
                {% endif %}
                <pre style="white-space:pre-wrap;font-size:1em;background:#f9f9f9;padding:12px;border-radius:7px;margin-top:10px;">{{ cv_uploaded_text }}</pre>
            </div>
        {% endif %}

        <div class="previews">
            <div class="preview-block">
                <h2><span class="badge">üìù</span>Fiche de poste</h2>
                {{ fiche_preview|safe }}
            </div>
            <div class="preview-block">
                <h2><span class="badge">üìÑ</span>CV g√©n√©r√©</h2>
                {{ cv_preview|safe }}
            </div>
            <div class="preview-block">
                <h2><span class="badge">‚úâÔ∏è</span>Lettre de motivation</h2>
                {{ lm_preview|safe }}
            </div>
        </div>
        <div style="margin-top:35px;text-align:center;">
            <a href="{{ url_for('index') }}" style="color:#2946e2; font-weight:600; font-size:1.05em;">‚¨ÖÔ∏è G√©n√©rer pour une autre offre</a>
        </div>
    </div>
</body>
</html>
