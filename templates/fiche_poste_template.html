<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Fiche de poste</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; color: #313144; background: #fff; }
    .fiche { max-width: 700px; margin: 0 auto; background: #fffdfa; border-radius: 2.3em; padding: 2.6em 2.2em 2em 2.2em; box-shadow: 0 0 18px #ffecc5; }
    h1 { color: #cb9300; font-size: 2em; margin-bottom: .3em;}
    .date { color: #a99c68; font-size: 0.97em; margin-bottom: 1.2em; text-align: right;}
    ul { margin: 0 0 0 1.3em;}
    li { margin-bottom: .28em;}
    @media (max-width: 700px) {
      .fiche { padding: 0.8em .2em; border-radius: 0;}
      h1 { font-size: 1.12em;}
    }
  </style>
</head>
<body>
  <div class="fiche">
    <h1>{{ fiche.titre or "Fiche de poste" }}</h1>
    <div class="date">Généré le {{ date_du_jour }}</div>
    <ul>
      {% for k, v in fiche.items() %}
        {% if v is string and v.strip() and k != 'titre' %}
          <li><b>{{ k | capitalize }} :</b> {{ v }}</li>
        {% elif v is iterable and v and not v is string %}
          <li><b>{{ k | capitalize }} :</b>
            <ul>
              {% for item in v %}
                <li>{{ item }}</li>
              {% endfor %}
            </ul>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
</body>
</html>
